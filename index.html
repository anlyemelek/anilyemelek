<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <!-- Masaüstü düzenini her cihazda korumak için genişliği kilitliyoruz -->
  <meta name="viewport" content="width=1200, initial-scale=1" />
  <title>Anıl Yemelek | Director of Photography</title>
  <meta name="description" content="Anıl Yemelek – Film/TV/Commercial portfolio." />
  <style>
    :root{
      --bg: #0a0a0a; /* near-black */
      --fg: #e6e6e6; /* light gray text */
      --muted: #9b9b9b;
      --brand: #5CE65C;
      --card: #121212;
      --grid-gap: 18px;
      --maxw: 1200px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: var(--bg); color: var(--fg);
    }
    a{color:inherit; text-decoration:none}
    .wrap{max-width:var(--maxw); margin:0 auto; padding:0 16px}

    /* ===== Header ===== */
    header{
      position:sticky; top:0; z-index:50; backdrop-filter:saturate(1.2) blur(6px);
      background: color-mix(in hsl, var(--bg) 80%, transparent);
      border-bottom: 1px solid #1f1f1f;
    }
    .topbar{display:flex; align-items:center; justify-content:space-between; padding:14px 0}
    .brand{display:flex; align-items:center; gap:14px; font-weight:700; letter-spacing:0.5px}
    /* Lottie logo boyutu/hizası */
    .logo-lottie{
      display:block;
      width: 210px;     /* ihtiyaç olursa ince ayar yapabilirsin */
      height: 32px;     /* header yüksekliğine göre ayarlı */
      line-height: 0;
    }
    .brand .tag{color:var(--muted); font-weight:500; font-size:13px}
    nav{display:flex; align-items:center; gap:18px; flex-wrap:wrap}
    .navlink{opacity:.9}
    .navlink:hover{opacity:1}
    .navlink[href="#/contact"] {color: var(--brand); font-weight: 600;}
    .sep{opacity:.25}
    .icon{display:inline-block; width:20px; height:20px; opacity:.9}
    .icon:hover{opacity:1}

    /* ===== Pages ===== */
    main{padding:26px 0 60px}

    /* ===== Filter bar ===== */
    .filters{
      display:flex; gap:10px; align-items:center; flex-wrap:wrap;
      margin: 4px 0 18px 0;
    }
    .filter-btn{
      padding:8px 14px; border:1px solid #262626; background:#141414; color:#ddd;
      border-radius:999px; font-size:13px; cursor:pointer;
      transition: .2s ease transform, .2s ease opacity, .2s ease border-color;
      opacity:.9;
    }
    .filter-btn:hover{ opacity:1; border-color:#333; }
    .filter-btn.active{
      color:#000; background:var(--brand); border-color:var(--brand); font-weight:700; opacity:1;
    }

    /* ===== Grid (Home) ===== */
    .grid{display:grid; gap:var(--grid-gap); grid-template-columns: repeat(12, 1fr)}
    .card{grid-column: span 12; background: var(--card); border:1px solid #1b1b1b; border-radius:14px; overflow:hidden; position:relative}
    .card-media{aspect-ratio: 16/9; width:100%; object-fit:cover; display:block; background:#0f0f0f}
    .card:hover .overlay{opacity:1; transform: translateY(0)}
    .overlay{
      position:absolute; inset:auto 0 0 0; padding:14px 16px; background: linear-gradient(180deg, transparent, rgba(0,0,0,.9));
      color:#fff; display:flex; align-items:flex-end; justify-content:space-between; gap:12px;
      opacity:.0; transform: translateY(10px); transition:.25s ease;
    }
    .title{font-size:16px; font-weight:700}
    .subtitle{font-size:13px; color:#ddd; opacity:.9}

    @media (min-width:640px){
      .card{grid-column: span 6}
    }
    @media (min-width:1024px){
      .card{grid-column: span 4}
    }

    /* ===== Project Page ===== */
    .project{display:grid; gap:22px}
    .hero{background:var(--card); border:1px solid #1b1b1b; border-radius:14px; overflow:hidden}
    .hero-media{display:block; width:100%; aspect-ratio: 16/9; object-fit:contain; background:#000}
    .thumbs{display:grid; gap:12px; grid-template-columns:repeat(auto-fill,minmax(120px,1fr))}
    .thumb{background:#101010; border:1px solid #222; border-radius:10px; overflow:hidden; cursor:pointer}
    .thumb img{width:100%; aspect-ratio:16/9; object-fit:cover; display:block}
    .caption{color:var(--muted); font-size:14px}

    /* Lightbox */
    .lightbox{position:fixed; inset:0; background:rgba(0,0,0,.95); display:none; align-items:center; justify-content:center; z-index:100}
    .lightbox.open{display:flex}
    .lb-inner{max-width:min(92vw, 1400px); width:100%}
    .lb-media{width:100%; max-height:86vh; object-fit:contain; background:#000}
    .lb-close{position:fixed; top:16px; right:16px; font-size:28px; background:#111; border:1px solid #333; border-radius:50%; width:44px; height:44px; display:grid; place-items:center; cursor:pointer}
    .lb-arrow{position:fixed; top:50%; transform:translateY(-50%); font-size:28px; background:#111; border:1px solid #333; width:44px; height:44px; border-radius:50%; display:grid; place-items:center; cursor:pointer}
    .lb-prev{left:16px}
    .lb-next{right:16px}

    /* Contact page */
    .contact{display:grid; gap:18px; max-width:720px; margin:0 }
    .contact p{color:#ddd}
    .contact a.link{color:#fff; text-decoration:underline; text-decoration-color:var(--brand)}
    .contact .grid2{display:grid; gap:16px}
    @media (min-width:640px){.contact .grid2{grid-template-columns:1fr 1fr}}

    /* Buttons */
    .btn{display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:999px; border:1px solid #2a2a2a; background:#141414}
    .btn:hover{border-color:#3a3a3a}

    /* Footer */
    footer{color:var(--muted); text-align:center; padding:26px 0; border-top:1px solid #1f1f1f}

    /* ==== Masaüstü düzenini her cihazda zorla (3 sütun sabit) ==== */
    .grid { grid-template-columns: repeat(12, 1fr); }
    .card { grid-column: span 4 !important; } /* 12/4 = 3 kart/satır */
  </style>

  <!-- Lottie player (CDN) -->
  <script src="https://unpkg.com/lottie-web/build/player/lottie.min.js"></script>
</head>
<body>
  <header>
    <div class="wrap topbar">
      <div class="brand">
        <!-- Metin yerine Lottie logo -->
        <a href="#/" aria-label="Home">
          <span id="logoLottie" class="logo-lottie"></span>
        </a>
        <span class="tag">Director of Photography</span>
      </div>
      <nav>
        <a class="navlink" href="#/contact">contact</a>
        <a class="icon" aria-label="Instagram" href="https://www.instagram.com/anilyemelek/" target="_blank" rel="noreferrer noopener" title="Instagram">
          <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20" aria-hidden="true"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm0 2a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3H7zm5 3.5a5.5 5.5 0 1 1 0 11 5.5 5.5 0 0 1 0-11zm0 2a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7zM18 6.5a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/></svg>
        </a>
      </nav>
    </div>
  </header>

  <main class="wrap" id="app"></main>

  <div class="lightbox" id="lightbox" aria-hidden="true">
    <button class="lb-close" aria-label="Close" id="lbClose">✕</button>
    <button class="lb-arrow lb-prev" id="lbPrev" aria-label="Previous">‹</button>
    <div class="lb-inner" id="lbInner">
      <img id="lbImg" class="lb-media" alt="" />
      <video id="lbVideo" class="lb-media" controls playsinline></video>
      <!-- iframe lightbox medyası dinamik eklenecek -->
    </div>
    <button class="lb-arrow lb-next" id="lbNext" aria-label="Next">›</button>
  </div>

  <footer style="font-size:12px; letter-spacing:0.2px; opacity:0.8;">
    <div class="wrap">© <span id="year"></span> Anıl Yemelek • All rights reserved •
      No part of this site may be reproduced without permission.
    </div>
  </footer>

  <script>
    const $ = (sel, el=document) => el.querySelector(sel);
    const $$ = (sel, el=document) => Array.from(el.querySelectorAll(sel));
    const app = $('#app');
    $('#year').textContent = new Date().getFullYear();

    /* ==== LOTTIE LOGO ==== */
    // Dosya adını ascii ile kullandım: assets/anillottie.json
    // Eğer dosyanın adı "anillottie.json" ise aşağıdaki path'i ona göre düzelt.
    let logoAnim;
    window.addEventListener('DOMContentLoaded', () => {
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      logoAnim = lottie.loadAnimation({
        container: document.getElementById('logoLottie'),
        renderer: 'svg',
        loop: false,
        autoplay: !prefersReduced,             // hareket azaltma tercihine saygı
        path: 'assets/anillottie.json'         // <-- gerekirse burada dosya adını güncelle
      });

      // Oyun bittiğinde son karede sabitle
      logoAnim.addEventListener('complete', () => {
        try {
          // totalFrames - 1'in üzerine git ve orada dur.
          const last = Math.max(0, Math.floor(logoAnim.getDuration(true)) - 1);
          logoAnim.goToAndStop(last, true);
        } catch(e){}
      });

      // Eğer kullanıcı azaltılmış animasyon tercih ediyorsa direkt son kareye geç
      if (prefersReduced) {
        logoAnim.addEventListener('DOMLoaded', () => {
          const last = Math.max(0, Math.floor(logoAnim.getDuration(true)) - 1);
          logoAnim.goToAndStop(last, true);
        });
      }
    });

    // ---- yardımcılar ----
    const isEmbedPlatform = (src='') => /player\.vimeo\.com|youtube\.com|youtu\.be/i.test(src);
    const normalizeVideoSrc = (src='') => {
      if (/^https?:\/\/vimeo\.com\//i.test(src)) {
        const id = src.trim().split('/').pop();
        return `https://player.vimeo.com/video/${id}`;
      }
      return src;
    };
    const vimeoThumbFromSrc = (src='') => {
      const m = src.match(/(?:video\/|vimeo\.com\/)\s*(\d+)/i);
      return m ? `https://vumbnail.com/${m[1]}.jpg` : '';
    };

    // ====== DATA ======
    const projects = [
      {
        slug: 'cmf1',
        title: 'CMF Phone 1',
        subtitle: 'Commercial',
        cover: 'assets/projects/cmf1/cmf1.avif',
        description: `CMF Phone 1 by Nothing`,
        media: [
          { type: 'video', src: 'https://player.vimeo.com/video/1089788027' },
          { type: 'image', src: 'assets/projects/disposables/still-01.jpg' },
          { type: 'image', src: 'assets/projects/disposables/still-02.jpg' },
          { type: 'image', src: 'assets/projects/disposables/still-03.jpg' },
        ]
      },
      {
        slug: '44iff',
        title: '44. İstanbul Film Festivali',
        subtitle: 'Short Film',
        cover: 'assets/projects/44iff/44iff.avif',
        description: `44. İstanbul Film Festivali`,
        media: [
          { type: 'video', src: 'https://player.vimeo.com/video/1087643931' },
          { type: 'image', src: 'assets/projects/1300rockstar/still-02.jpg' },
          { type: 'image', src: 'assets/projects/1300rockstar/still-03.jpg' },
        ]
      },
      {
        slug: 'madrigalsenyoksun',
        title: 'Madrigal - Sen ya da hiç',
        subtitle: 'Music Video',
        cover: 'assets/projects/madrigalgoksel/madrigalgoksel.avif',
        description: `Madrigal feat Göksel - Ne zamandır sendeyim`,
        media: [
          { type: 'video', src: 'https://player.vimeo.com/video/1033811464' },
          { type: 'image', src: 'assets/projects/1300rockstar/still-02.jpg' },
          { type: 'image', src: 'assets/projects/1300rockstar/still-03.jpg' },
        ]
      },      
      {
        slug: 'wwf',
        title: 'WWF - Eye Wear Campaign',
        subtitle: 'Fashion',
        cover: 'assets/projects/wwf/wwf.avif',
        description: `WWF - Eye Wear Campaign`,
        media: [
          { type: 'video', src: 'https://player.vimeo.com/video/1035195736' },
          { type: 'image', src: 'assets/projects/1300rockstar/still-02.jpg' },
          { type: 'image', src: 'assets/projects/1300rockstar/still-03.jpg' },
        ]
      },     
      {
        slug: 'madrigal',
        title: 'Madrigal - Sen Yoksun',
        subtitle: 'Music Video',
        cover: 'assets/projects/madrigal/madrigal.avif',
        description: `Madrigal - Sen Yoksun`,
        media: [
          { type: 'video', src: 'https://player.vimeo.com/video/1033797724' },
          { type: 'image', src: 'assets/projects/1300rockstar/still-02.jpg' },
          { type: 'image', src: 'assets/projects/1300rockstar/still-03.jpg' },
        ]
      },              
    ];

    // ====== STATE ======
    let currentProject = null;
    let currentIndex = 0;
    let currentFilter = 'All';

    function getCategories(){
      const map = new Map();
      projects.forEach(p=>{
        const lc = (p.subtitle||'').trim().toLowerCase();
        if(lc && !map.has(lc)) map.set(lc, p.subtitle.trim());
      });
      return ['All', ...Array.from(map.values())];
    }

    // ====== ROUTER ======
    function router(){
      const hash = location.hash || '#/';
      const [, route, param] = hash.split('/');
      if(!route){
        renderHome();
      } else if(route === 'project' && param){
        renderProject(param);
      } else if(route === 'contact'){
        renderContact();
      } else {
        renderNotFound();
      }
    }
    window.addEventListener('hashchange', router);
    window.addEventListener('DOMContentLoaded', router);

    // ====== VIEWS ======
    function renderHome(){
      const categories = getCategories();

      const filtersHTML = `
        <div class="filters" role="tablist" aria-label="Filter projects by category">
          ${categories.map(cat => `
            <button class="filter-btn ${cat === currentFilter ? 'active':''}" role="tab"
                    data-cat="${cat}">
              ${cat}
            </button>
          `).join('')}
        </div>
      `;

      const filtered = projects.filter(p => {
        if(currentFilter === 'All') return true;
        return (p.subtitle||'').trim().toLowerCase() === currentFilter.trim().toLowerCase();
      });

      const gridHTML = `
        <section class="grid" aria-label="Works grid">
          ${filtered.map(p => `
            <a class="card" href="#/project/${p.slug}" aria-label="${p.title} ${p.subtitle}">
              <img class="card-media" loading="lazy" src="${p.cover}" alt="${p.title} cover"/>
              <div class="overlay"><div>
                <div class="title">${p.title}</div>
                <div class="subtitle">${p.subtitle}</div>
              </div></div>
            </a>
          `).join('')}
        </section>
      `;

      app.innerHTML = filtersHTML + gridHTML;

      $$('.filter-btn', app).forEach(btn=>{
        btn.addEventListener('click', ()=>{
          currentFilter = btn.dataset.cat || 'All';
          $$('.filter-btn', app).forEach(b=>b.classList.toggle('active', b === btn));
          renderHome();
          window.scrollTo({top: document.querySelector('.filters').getBoundingClientRect().top + window.scrollY - 12, behavior:'instant'});
        });
      });
    }

    function renderProject(slug){
      const p = projects.find(x => x.slug === slug);
      if(!p){ renderNotFound(); return; }
      currentProject = p; currentIndex = 0;

      const thumbsHtml = p.media.map((m, i) => {
        if (m.type === 'image') {
          return `<button class="thumb" data-idx="${i}" data-type="image" data-src="${m.src}" aria-label="Open media ${i+1}">
                    <img loading="lazy" src="${m.src}" alt="thumb ${i+1}">
                  </button>`;
        } else {
          const normSrc = normalizeVideoSrc(m.src);
          const poster = vimeoThumbFromSrc(normSrc) || m.poster || '';
          return `<button class="thumb" data-idx="${i}" data-type="video" data-src="${normSrc}" data-poster="${poster}" aria-label="Open media ${i+1}">
                    <img loading="lazy" src="${poster || 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=='}" alt="video thumb ${i+1}">
                  </button>`;
        }
      }).join('');

      app.innerHTML = `
        <article class="project" data-slug="${p.slug}">
          <section class="hero" id="hero">
            ${renderHeroMedia(p.media[0])}
          </section>
          <section class="thumbs" id="thumbs">
            ${thumbsHtml}
          </section>
          <section class="caption">
            ${p.description}
          </section>
        </article>
      `;

      $$('#thumbs .thumb').forEach(btn => btn.addEventListener('click', (e)=>{
        const idx = Number(e.currentTarget.dataset.idx);
        switchMedia(idx);
      }));

      $('#hero').addEventListener('click', () => openLightbox());

      document.addEventListener('keydown', onKeyNav);
    }

    function renderContact(){
      app.innerHTML = `
        <section class="contact">
          <p>Please contact us for collaboration, projects and representation.</p>
          <div class="grid2">
            <div>
              <p><strong>E-mail:</strong> <a class="link" href="mailto:anlyemelek@gmail.com">anlyemelek@gmail.com</a></p>
              <p><strong>Telephone:</strong> <a class="link" href="tel:+905456776737">+90 545 677 67 37</a></p>
              <p><strong>Instagram:</strong> <a class="link" href="https://www.instagram.com/anilyemelek/" target="_blank" rel="noreferrer noopener">instagram.com/anilyemelek</a></p>
              <a class="btn" href="mailto:anlyemelek@gmail.com?&subject=Work Inquiry&body=Hello Anıl, Are you available between /N-/N days for our project?">Send E-mail</a>
            </div>
          </div>
        </section>
      `;
    }

    function renderNotFound(){
      app.innerHTML = `<p>Sayfa bulunamadı.</p>`;
    }

    // ====== HERO / MEDIA SWITCHING ======
    function renderHeroMedia(m){
      if (m && m.type === 'video') {
        const src = normalizeVideoSrc(m.src);
        if (isEmbedPlatform(src)) {
          return `<iframe class="hero-media" src="${src}" frameborder="0"
                      allow="autoplay; fullscreen; picture-in-picture" allowfullscreen
                      style="width:100%; aspect-ratio:16/9;"></iframe>`;
        } else {
          return `<video class="hero-media" src="${src}" ${m.poster?`poster="${m.poster}"`:''} controls playsinline preload="metadata"></video>`;
        }
      }
      return `<img class="hero-media" src="${m?.src || ''}" alt="project media" />`;
    }

    function switchMedia(idx){
      if(!currentProject) return;
      currentIndex = idx;
      const media = currentProject.media[idx];
      $('#hero').innerHTML = renderHeroMedia(media);
    }

    function onKeyNav(e){
      if(!currentProject) return;
      if(e.key === 'ArrowRight') { nextMedia(); }
      if(e.key === 'ArrowLeft') { prevMedia(); }
    }
    function nextMedia(){
      const n = currentProject.media.length;
      switchMedia((currentIndex + 1) % n);
    }
    function prevMedia(){
      const n = currentProject.media.length;
      switchMedia((currentIndex - 1 + n) % n);
    }

    // ====== LIGHTBOX ======
    const lb = $('#lightbox');
    const lbInner = $('#lbInner');
    const lbImg = $('#lbImg');
    const lbVideo = $('#lbVideo');
    const lbClose = $('#lbClose');
    const lbPrev = $('#lbPrev');
    const lbNext = $('#lbNext');

    const lbFrame = document.createElement('iframe');
    lbFrame.className = 'lb-media';
    lbFrame.setAttribute('frameborder','0');
    lbFrame.setAttribute('allow','autoplay; fullscreen; picture-in-picture');
    lbFrame.setAttribute('allowfullscreen','');

    function openLightbox(){
      if(!currentProject) return;
      lb.classList.add('open');
      lb.setAttribute('aria-hidden','false');
      renderLbMedia();
      document.addEventListener('keydown', onLbKey);
    }
    function closeLightbox(){
      lb.classList.remove('open');
      lb.setAttribute('aria-hidden','true');
      lbVideo.pause();
      lbFrame.src = '';
      document.removeEventListener('keydown', onLbKey);
    }
    function onLbKey(e){
      if(e.key === 'Escape') closeLightbox();
      if(e.key === 'ArrowRight') { nextMedia(); renderLbMedia(); }
      if(e.key === 'ArrowLeft') { prevMedia(); renderLbMedia(); }
    }
    function renderLbMedia(){
      const m = currentProject.media[currentIndex];
      lbImg.style.display = 'none';
      lbVideo.style.display = 'none';
      if (lbFrame.isConnected) lbFrame.style.display = 'none';

      if (m.type === 'video') {
        const src = normalizeVideoSrc(m.src);
        if (isEmbedPlatform(src)) {
          if (!lbFrame.isConnected) lbInner.appendChild(lbFrame);
          lbFrame.src = src;
          lbFrame.style.display = 'block';
        } else {
          lbVideo.src = src;
          if (m.poster) lbVideo.poster = m.poster;
          lbVideo.style.display = 'block';
          lbVideo.play();
        }
      } else {
        lbImg.src = m.src;
        lbImg.alt = (currentProject.title || 'still');
        lbImg.style.display = 'block';
      }
    }

    lbClose.addEventListener('click', closeLightbox);
    lbPrev.addEventListener('click', ()=>{ prevMedia(); renderLbMedia(); });
    lbNext.addEventListener('click', ()=>{ nextMedia(); renderLbMedia(); });
    lb.addEventListener('click', (e)=>{ if(e.target === lb) closeLightbox(); });
  </script>
</body>
</html>